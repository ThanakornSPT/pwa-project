<!DOCTYPE html>
<html lang="th" ng-app="vocabApp">
    <head>
        

        <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vocabulary Learning</title>


    <!-- PWA Meta Tags -->
<meta name="theme-color" content="#b3d9f2">
<meta name="description" content="Practice English small talk conversations with interactive quizzes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="Flash card">

<link rel="manifest" href="./manifest.json">

<!-- PWA Manifest -->
<link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIlNtYWxsIFRhbGsgRW5nbGlzaCBQcmFjdGljZSIsCiAgInNob3J0X25hbWUiOiAiRW5nbGlzaCBQcmFjdGljZSIsCiAgImRlc2NyaXB0aW9uIjogIlByYWN0aWNlIEVuZ2xpc2ggc21hbGwgdGFsayBjb252ZXJzYXRpb25zIiwKICAic3RhcnRfdXJsIjogIi4vIiwKICAiZGlzcGxheSI6ICJzdGFuZGFsb25lIiwKICAib3JpZW50YXRpb24iOiAicG9ydHJhaXQiLAogICJ0aGVtZV9jb2xvciI6ICIjODBjNmI1IiwKICAiYmFja2dyb3VuZF9jb2xvciI6ICIjZTBmNGYzIiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTVRJNElpQm9aV2xuYUhROUlqRXlPQ0lnZG1sbGQwSnZlRDBpTUNBd0lERXlPQ0F4TWpnaUlIaHRiRzV6UFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eU1EQXdMM04yWnlJK1BISmxZM1FnZUQwaU1UWWlJSGs5SWpFMklpQjNhV1IwYUQwaU9UWWlJR2hsYVdkb2REMGlPVFlpSUhKNFBTSTVJaUJtYVd4c1BTSWpPREJqTm1JMUlpOCtQSFJsZUhRZ2VEMGlOalFpSUhrOUlqUTBJaUJtYjI1MExYTnBlbVU5SWpJNGNIZ2lJR1pwYkd3OUlpTm1abVptWmlJZ1ptOXVkQzEzWldsbmFIUTlJaUkrUlR3dmRHVjRkRDQ4TDNOMlp6ND0iLAogICAgICAic2l6ZXMiOiAiMTI4eDEyOCIsCiAgICAgICJ0eXBlIjogImltYWdlL3N2Zyt4bWwiCiAgICB9LAogICAgewogICAgICAic3JjIjogImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjNhV1IwYUQwaU5URXlJaUJvWldsbmFIUTlJalV4TWlJZ2RtbGxkMEp2ZUQwaU1DQXdJRFV4TWlBMU1USWlJSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5SStQSEpsWTNRZ2VEMGlOalFpSUhrOUlqWTBJaUIzYVdSMGFEMGlNemd6SWlCb1pXbG5hSFE5SWpNNE15SWdjbmc5SWpNNElpQm1hV3hzUFNJak9EQmpObUkxSWk4K1BIUmxlSFFnZUQwaU1qVTJJaUI1UFNJeU5UWWlJR1p2Ym5RdGMybDZaVDBpTWpnd2NIZ2lJR1pwYkd3OUlpTm1abVptWmlJZ1ptOXVkQzEzWldsbmFIUTlJaUkrUlR3dmRHVjRkRDQ4TDNOMlp6ND0iLAogICAgICAic2l6ZXMiOiAiNTEyeDUxMiIsCiAgICAgICJ0eXBlIjogImltYWdlL3N2Zyt4bWwiCiAgICB9CiAgXQp9">

<!-- Apple Touch Icons -->
<link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3QgeD0iMTYiIHk9IjE2IiB3aWR0aD0iOTYiIGhlaWdodD0iOTYiIHJ4PSI5IiBmaWxsPSIjODBjNmI1Ii8+PHRleHQgeD0iNjQiIHk9IjQ0IiBmb250LXNpemU9IjI4cHgiIGZpbGw9IiNmZmZmZmYiIGZvbnQtd2VpZ2h0PSJiIj5FPC90ZXh0Pjwvc3ZnPg==">


        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                background: linear-gradient(180deg, #b3d9f2 100%, #b3d9f2 100%);
                min-height: 100vh;
                display: flex;
                justify-content: center;
                align-items: center;
                padding: 20px;
            }

            .app-container {
                background: white;
                border-radius: 20px;
                box-shadow: 0 20px 40px rgba(0,0,0,0.1);
                width: 100%;
                max-width: 400px;
                padding: 30px;
                text-align: center;
            }

            .category-selector {
                background: #f8f9fa;
                border: none;
                border-radius: 10px;
                padding: 12px 20px;
                width: 100%;
                margin-bottom: 20px;
                font-size: 16px;
                color: #495057;
                appearance: none;
                background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
                background-position: right 12px center;
                background-repeat: no-repeat;
                background-size: 16px;
            }

            .thai-word {
                font-size: 28px;
                font-weight: bold;
                color: #2d3748;
                margin-bottom: 10px;
            }

            .english-word {
                font-size: 18px;
                color: #718096;
                margin-bottom: 20px;
                min-height: 25px;
            }

            .image-placeholder {
                background: #e2e8f0;
                border-radius: 10px;
                height: 150px;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-bottom: 20px;
                color: #a0aec0;
                font-size: 18px;
            }

            .sentence-template {
                font-size: 16px;
                color: #4a5568;
                margin-bottom: 20px;
            }

            .letter-grid {
                display: grid;
                grid-template-columns: repeat(6, 1fr);
                gap: 8px;
                margin-bottom: 20px;
            }

            .letter-btn {
                background: #e2e8f0;
                border: none;
                border-radius: 8px;
                padding: 12px;
                font-size: 16px;
                font-weight: bold;
                color: #2d3748;
                cursor: pointer;
                transition: all 0.2s;
            }

            .letter-btn:hover {
                background: #cbd5e0;
                transform: translateY(-1px);
            }

            .letter-btn.correct {
                background: #48bb78;
                color: white;
            }

            .letter-btn.used {
                background: #a0aec0;
                color: #718096;
                cursor: not-allowed;
            }

            .progress-bar {
                background: #e2e8f0;
                border-radius: 10px;
                height: 8px;
                margin-bottom: 20px;
                overflow: hidden;
            }

            .progress-fill {
                background: #48bb78;
                height: 100%;
                transition: width 0.3s ease;
            }

            .progress-text {
                font-size: 14px;
                color: #718096;
                margin-bottom: 20px;
            }

            .action-buttons {
                display: flex;
                gap: 10px;
            }

            .btn {
                flex: 1;
                padding: 12px 20px;
                border: none;
                border-radius: 10px;
                font-size: 16px;
                font-weight: bold;
                cursor: pointer;
                transition: all 0.2s;
            }

            .btn-keep {
                background: #b3b3b3;
                color: white;
            }

            .btn-keep:hover {
                background: #2c5282;
            }

            .btn-show {
                background: #ffffff;
                color: #3d76bf;
                border: solid 2px;
            }
/*
            .btn-show:hover {
                background: #dd6b20;
            }

            .btn-pass {
                background: #3f7ac6;
                color: white;
            }

            .btn-pass:hover {
                background: #c53030;
            }*/

            .completion-message {
                background: #f0fff4;
                border: 2px solid #48bb78;
                border-radius: 10px;
                padding: 20px;
                margin-top: 20px;
                color: #2f855a;
            }

            .word-input {
                background: #f8f9fa;
                border: 2px solid #e2e8f0;
                border-radius: 10px;
                padding: 12px;
                font-size: 16px;
                width: 100%;
                margin: 10px 0;
                transition: border-color 0.3s;
                text-align: center;
            }

            .word-input.correct {
                border-color: #48bb78;
                background: #f0fff4;
            }

            @media (max-width: 480px) {
                .app-container {
                    padding: 20px;
                }

                .thai-word {
                    font-size: 24px;
                }

                .letter-grid {
                    grid-template-columns: repeat(5, 1fr);
                }
            }

            .sample-sentences {
                background: #f0f8ff;
                border: 1px solid #b3d9ff;
                border-radius: 8px;
                padding: 15px;
                margin-bottom: 20px;
                text-align: left;
            }

            .sample-sentence {
                font-size: 14px;
                color: #2d3748;
                margin-bottom: 8px;
                padding: 5px 0;
                border-bottom: 1px dotted #cbd5e0;
            }

            .sample-sentence:last-child {
                border-bottom: none;
                margin-bottom: 0;
            }

            .category-container {
                display: flex;
                gap: 10px;
                margin-bottom: 20px;
                align-items: flex-start;
            }

            .category-selector {
                flex: 1;
                background: #f8f9fa;
                border: none;
                border-radius: 10px;
                padding: 12px 20px;
                font-size: 16px;
                color: #495057;
                appearance: none;
                background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
                background-position: right 12px center;
                background-repeat: no-repeat;
                background-size: 16px;
            }

            .btn-refresh {
                background: #17a2b8;
                color: white;
                border: none;
                border-radius: 10px;
                padding: 12px 16px;
                font-size: 14px;
                font-weight: bold;
                cursor: pointer;
                transition: all 0.2s;
                min-width: 80px;
            }

            .btn-refresh:hover {
                background: #138496;
                transform: translateY(-1px);
            }

        </style>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.3/angular.min.js"></script>
    </head>
    <body ng-controller="VocabController">
        <div class="app-container">
            
            <div class="category-container">
                <select class="category-selector" ng-model="selectedCategory" ng-change="changeCategory()">
                    <option ng-repeat="(key, value) in categoryOptions" value="{{ key }}">{{ value }}</option>
                </select>
                <button class="btn-refresh" ng-click="refreshApp()">Refresh</button>
            </div>

            <div ng-if="!isCompleted">
                <div class="thai-word">{{ currentWord.thai }}</div>
                <div class="english-word">{{ showEnglish ? currentWord.english : '' }}</div>
                <!-- <div class="image-placeholder">
                IMAGE
            </div> -->
                <div class="sentence-template">
                    {{ currentWord.sentence.split('_____')[0] }}<input type="text" class="word-input" ng-class="{'correct': isWordComplete}" ng-model="userInput" readonly>{{ currentWord.sentence.split('_____')[1] }}
            
                </div>
                <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà -->
                <div class="sample-sentences">
                    <div class="sample-sentence" ng-repeat="sentence in currentWord.sampleSentences">
                        <span ng-if="showEnglish && currentWord.sampleSentences">{{ sentence }}</span>
                        <span ng-if="!(showEnglish && currentWord.sampleSentences)">&nbsp;</span>
                    </div>
                </div>
                <div class="letter-grid">
                    <button class="letter-btn" ng-repeat="letter in letters" ng-class="{'correct': letter.isCorrect, 'used': letter.isUsed}" ng-click="selectLetter(letter)" ng-disabled="letter.isUsed">{{ letter.char }}
                </button>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" ng-style="{'width': progressPercentage + '%'}"></div>
                </div>
                <div class="progress-text">{{ progressPercentage }}%</div>
                <div class="action-buttons">
                    <button class="btn btn-keep" ng-click="keepWord()">keep</button>
                    <button class="btn btn-show" ng-click="toggleShow()">{{ showEnglish ? 'hide' : 'show' }}</button>
                    <button class="btn btn-pass" ng-click="passWord()" ng-disabled="!isWordComplete">pass</button>
                </div>
            </div>
            <div ng-if="isCompleted" class="completion-message">
                <h2>üéâ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô!</h2>
                <p>‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡πÉ‡∏ô‡∏´‡∏°‡∏ß‡∏î {{ getCategoryName() }} ‡πÅ‡∏•‡πâ‡∏ß!</p>
                <button class="btn btn-keep" ng-click="resetCategory()" style="margin-top: 15px; width: 100%;">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
            </div>
        </div>
        <script>

            // Service Worker Registration
            if ('serviceWorker'in navigator) {
                window.addEventListener('load', function() {
                    navigator.serviceWorker.register('data:application/javascript;base64,' + btoa(`
                    const CACHE_NAME = 'quiz-game-v1';
                    const urlsToCache = [
                        '/',
                        '/index.html'
                    ];

                    self.addEventListener('install', function(event) {
                        event.waitUntil(
                            caches.open(CACHE_NAME)
                                .then(function(cache) {
                                    return cache.addAll(urlsToCache);
                                })
                        );
                    });

                    self.addEventListener('fetch', function(event) {
                        event.respondWith(
                            caches.match(event.request)
                                .then(function(response) {
                                    if (response) {
                                        return response;
                                    }
                                    return fetch(event.request);
                                }
                            )
                        );
                    });
                `)).then(function(registration) {
                        console.log('ServiceWorker registration successful');
                    }).catch(function(err) {
                        console.log('ServiceWorker registration failed: ', err);
                    });
                });
            }

            angular.module('vocabApp', []).controller('VocabController', function($scope) {

                $scope.categoryOptions = {
                    A1: 'A-1',
                    A2: 'A-2',
                    A3: 'A-3',
                    A4: 'A-4'
                };

                // Vocabulary data
                $scope.vocabularyData = {
                    A1: [{
                        "thai": "‡∏•‡∏∞‡∏ó‡∏¥‡πâ‡∏á, ‡∏ó‡∏≠‡∏î‡∏ó‡∏¥‡πâ‡∏á",
                        "english": "ABANDON",
                        "sentence": "He had to ____ his car.",
                        "sampleSentences": ["The captain gave the order to abandon ship.", "The stray cat was abandoned by its owners.", "They had to abandon their plans to travel because of the storm.", "She felt abandoned by her friends when she needed them most."]
                    }, {
                        "thai": "‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å, ‡∏•‡πâ‡∏°‡∏•‡πâ‡∏≤‡∏á",
                        "english": "ABOLISH",
                        "sentence": "The government plans to ____ the old law.",
                        "sampleSentences": ["Slavery was abolished in the 19th century.", "The new policy will abolish the tax altogether.", "Many people are calling for the government to abolish the death penalty.", "The school decided to abolish the uniform requirement."]
                    }, {
                        "thai": "‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏±‡∏ô)",
                        "english": "ABORT",
                        "sentence": "They had to ____ the mission due to bad weather.",
                        "sampleSentences": ["The launch of the rocket had to be aborted.", "The pilot had to abort the landing at the last minute.", "The team was forced to abort the rescue mission.", "You should abort the download if you think it has a virus."]
                    }, {
                        "thai": "‡∏™‡∏£‡∏£‡πÄ‡∏™‡∏£‡∏¥‡∏ç, ‡∏¢‡∏Å‡∏¢‡πà‡∏≠‡∏á",
                        "english": "ACCLAIM",
                        "sentence": "The movie received international ____.",
                        "sampleSentences": ["The new artist was acclaimed by critics.", "His performance received widespread acclaim.", "The author‚Äôs latest novel has been acclaimed as a masterpiece.", "She received international acclaim for her work in human rights."]
                    }, {
                        "thai": "‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏î‡∏ß‡∏Å",
                        "english": "ACCOMMODATE",
                        "sentence": "This hotel can ____ up to 200 guests.",
                        "sampleSentences": ["The room was large enough to accommodate a family of five.", "We will try our best to accommodate your request.", "The conference hall can accommodate over a thousand people.", "The new schedule will accommodate both students and working professionals."]
                    }, {
                        "thai": "‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°, ‡πÑ‡∏õ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô",
                        "english": "ACCOMPANY",
                        "sentence": "She will ____ me to the party.",
                        "sampleSentences": ["He accompanied his friend on a walk.", "Children under 12 must be accompanied by an adult.", "The singer was accompanied by a live orchestra.", "The main dish comes with a sauce to accompany it."]
                    }, {
                        "thai": "‡∏ó‡∏≥‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à, ‡∏ö‡∏£‡∏£‡∏•‡∏∏‡∏ú‡∏•",
                        "english": "ACCOMPLISH",
                        "sentence": "I want to ____ all my goals this year.",
                        "sampleSentences": ["With hard work, you can accomplish anything.", "They accomplished the task in record time.", "It is a great feeling to accomplish something you've worked hard for.", "We need a strong leader to help us accomplish our mission."]
                    }, {
                        "thai": "‡∏™‡∏∞‡∏™‡∏°, ‡∏™‡∏±‡πà‡∏á‡∏™‡∏°",
                        "english": "ACCUMULATE",
                        "sentence": "He started to ____ a lot of money.",
                        "sampleSentences": ["Over time, dust began to accumulate on the shelves.", "She accumulated a vast collection of books.", "The company has accumulated a lot of debt.", "He accumulated a lot of knowledge from years of research."]
                    }, {
                        "thai": "‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",
                        "english": "ACHIEVE",
                        "sentence": "You must work hard to ____ your dreams.",
                        "sampleSentences": ["She worked hard to achieve her goal of becoming a doctor.", "We can achieve great things together.", "The team achieved an impressive victory.", "It's important to set realistic goals that you can achieve."]
                    }, {
                        "thai": "‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö, ‡πÑ‡∏î‡πâ‡∏°‡∏≤",
                        "english": "ACQUIRE",
                        "sentence": "The company plans to ____ a new building.",
                        "sampleSentences": ["He acquired a taste for fine wine.", "The museum acquired several new paintings.", "She's trying to acquire new skills for her new job.", "The company was able to acquire a new partner."]
                    }, {
                        "thai": "‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£, ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£",
                        "english": "ADMINISTER",
                        "sentence": "The government will ____ the new program.",
                        "sampleSentences": ["She was hired to administer the company's finances.", "The nurse administered the medication to the patient.", "A new team was brought in to administer the project.", "The principal will administer the final exams."]
                    }, {
                        "thai": "‡∏ä‡∏∑‡πà‡∏ô‡∏ä‡∏°, ‡∏ô‡∏±‡∏ö‡∏ñ‡∏∑‡∏≠",
                        "english": "ADMIRE",
                        "sentence": "I really ____ your courage.",
                        "sampleSentences": ["I admire her for her dedication and hard work.", "We stopped to admire the beautiful sunset.", "Many people admire his leadership qualities.", "I admire the way she handles difficult situations."]
                    }, {
                        "thai": "‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°, ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å",
                        "english": "AFFILIATE",
                        "sentence": "The radio station is an ____ of a larger network.",
                        "sampleSentences": ["The new company will affiliate with a well-known brand.", "Our hospital is affiliated with the university.", "The smaller club decided to affiliate with the national organization.", "Many affiliate companies share resources with the parent company."]
                    }, {
                        "thai": "‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏à‡πà‡∏≤‡∏¢‡πÑ‡∏î‡πâ",
                        "english": "AFFORD",
                        "sentence": "I can't ____ to buy that expensive car.",
                        "sampleSentences": ["They can't afford to go on vacation this year.", "She works hard to afford a nice life for her family.", "The apartment is nice, but we can't afford the rent.", "He can't afford to lose his job."]
                    }, {
                        "thai": "‡∏ö‡∏£‡∏£‡πÄ‡∏ó‡∏≤, ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏ö‡∏≤‡∏ö‡∏≤‡∏á‡∏•‡∏á",
                        "english": "ALLEVIATE",
                        "sentence": "The medicine will ____ the pain.",
                        "sampleSentences": ["The new law aims to alleviate poverty.", "She took a walk to alleviate her stress.", "We need a solution to alleviate the traffic congestion.", "Drinking some water can help alleviate your thirst."]
                    }, {
                        "thai": "‡∏≠‡∏∏‡∏ó‡∏ò‡∏£‡∏ì‡πå, ‡∏î‡∏∂‡∏á‡∏î‡∏π‡∏î",
                        "english": "APPEAL",
                        "sentence": "The new law is not going to ____ to everyone.",
                        "sampleSentences": ["The company appealed to the public for donations.", "The beautiful design appeals to a wide range of customers.", "He decided to appeal the court's decision.", "The idea of a quiet life in the country appeals to me."]
                    }, {
                        "thai": "‡∏õ‡∏£‡∏ö‡∏°‡∏∑‡∏≠, ‡∏¢‡∏Å‡∏¢‡πà‡∏≠‡∏á",
                        "english": "APPLAUD",
                        "sentence": "The audience will ____ the performance.",
                        "sampleSentences": ["The crowd started to applaud the speaker.", "We all applauded the team for their victory.", "I want to applaud the volunteers for their hard work.", "The director was applauded for his creativity."]
                    }],
                    A2: [{
                        thai: '‡∏™‡∏±‡∏ï‡∏ß‡πå',
                        english: 'ANIMAL',
                        sentence: 'The zoo has many different _____ species.',
                        sampleSentences: ["Wild animals live in the forest.", "Pet animals need daily care."]
                    }, {
                        thai: '‡πÅ‡∏°‡∏ß',
                        english: 'CAT',
                        sentence: 'My _____ likes to sleep in the sun.',
                        sampleSentences: ["The cat is playing with a ball.", "Cats are independent animals."]
                    }, {
                        thai: '‡∏™‡∏∏‡∏ô‡∏±‡∏Ç',
                        english: 'DOG',
                        sentence: 'The _____ is playing in the park.',
                        sampleSentences: ["Dogs are loyal companions.", "The dog barked at the stranger."]
                    }, {
                        thai: '‡∏ô‡∏Å',
                        english: 'BIRD',
                        sentence: 'A beautiful _____ is singing in the tree.',
                        sampleSentences: ["Birds can fly high in the sky.", "The bird built a nest on the branch."]
                    }, {
                        thai: '‡∏õ‡∏•‡∏≤',
                        english: 'FISH',
                        sentence: 'We caught a big _____ in the lake.',
                        sampleSentences: ["Fish swim in schools underwater.", "Fresh fish is served at the restaurant."]
                    }, {
                        thai: '‡∏ä‡πâ‡∏≤‡∏á',
                        english: 'ELEPHANT',
                        sentence: 'The _____ is the largest land animal.',
                        sampleSentences: ["Elephants have excellent memories.", "The elephant uses its trunk to grab food."]
                    }],
                    A3: [{
                        thai: '‡∏™‡∏µ',
                        english: 'COLOR',
                        sentence: 'What is your favorite _____?',
                        sampleSentences: ["Artists use many colors in paintings.", "The rainbow shows seven beautiful colors."]
                    }, {
                        thai: '‡πÅ‡∏î‡∏á',
                        english: 'RED',
                        sentence: 'The _____ rose smells wonderful.',
                        sampleSentences: ["Red is the color of love.", "The traffic light shows red for stop."]
                    }, {
                        thai: '‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô',
                        english: 'BLUE',
                        sentence: 'The sky is bright _____ today.',
                        sampleSentences: ["Blue is a calming color.", "The ocean looks deep blue."]
                    }, {
                        thai: '‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß',
                        english: 'GREEN',
                        sentence: 'The grass is _____ in spring.',
                        sampleSentences: ["Green leaves grow on healthy trees.", "Vegetables are usually green."]
                    }, {
                        thai: '‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á',
                        english: 'YELLOW',
                        sentence: 'The sun looks bright _____ in the sky.',
                        sampleSentences: ["Yellow flowers bloom in the garden.", "Bananas turn yellow when ripe."]
                    }, {
                        thai: '‡∏°‡πà‡∏ß‡∏á',
                        english: 'PURPLE',
                        sentence: 'She is wearing a _____ dress.',
                        sampleSentences: ["Purple grapes make delicious wine.", "The sunset has purple clouds."]
                    }],
                    A4: [{
                        thai: '‡∏≠‡∏≤‡∏´‡∏≤‡∏£',
                        english: 'FOOD',
                        sentence: 'We need to buy _____ for dinner.',
                        sampleSentences: ["Healthy food gives us energy.", "Thai food is famous worldwide."]
                    }, {
                        thai: '‡∏Ç‡πâ‡∏≤‡∏ß',
                        english: 'RICE',
                        sentence: 'We eat _____ with every meal.',
                        sampleSentences: ["Rice is a staple food in Asia.", "White rice goes well with curry."]
                    }, {
                        thai: '‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á',
                        english: 'BREAD',
                        sentence: 'I like to eat _____ with butter.',
                        sampleSentences: ["Fresh bread smells amazing.", "We buy bread from the bakery."]
                    }, {
                        thai: '‡πÄ‡∏ô‡∏∑‡πâ‡∏≠',
                        english: 'MEAT',
                        sentence: 'The _____ is cooked perfectly.',
                        sampleSentences: ["Grilled meat tastes delicious.", "Red meat is high in protein."]
                    }, {
                        thai: '‡∏ú‡∏±‡∏Å',
                        english: 'VEGETABLE',
                        sentence: 'Eating _____ is good for your health.',
                        sampleSentences: ["Green vegetables contain vitamins.", "We grow vegetables in our garden."]
                    }, {
                        thai: '‡∏ô‡∏°',
                        english: 'MILK',
                        sentence: 'Children need to drink _____ every day.',
                        sampleSentences: ["Fresh milk comes from cows.", "I drink milk with my breakfast."]
                    }]
                };

                // Initialize variables
                $scope.selectedCategory = 'A1';
                $scope.currentWordIndex = 0;
                $scope.showEnglish = false;
                $scope.userInput = '';
                $scope.letters = [];
                $scope.isWordComplete = false;
                $scope.isCompleted = false;
                $scope.keptWords = [];
                $scope.passedWords = [];

                // Initialize the app
                $scope.init = function() {
                    $scope.changeCategory();
                }
                ;

                $scope.changeCategory = function() {
                    $scope.currentWordIndex = 0;
                    $scope.keptWords = [];
                    $scope.passedWords = [];
                    $scope.isCompleted = false;
                    $scope.nextWord();
                }
                ;

                $scope.nextWord = function() {
                    var words = $scope.vocabularyData[$scope.selectedCategory];
                    var availableWords = words.filter(function(word, index) {
                        return $scope.passedWords.indexOf(index) === -1;
                    });

                    if (availableWords.length === 0) {
                        $scope.isCompleted = true;
                        return;
                    }

                    // Always random from all available words
                    var wordToShow = availableWords[Math.floor(Math.random() * availableWords.length)];

                    $scope.currentWordIndex = words.indexOf(wordToShow);
                    $scope.currentWord = wordToShow;
                    $scope.showEnglish = false;
                    $scope.userInput = '';
                    $scope.isWordComplete = false;
                    $scope.generateLetters();
                }
                ;

                $scope.generateLetters = function() {
                    var englishWord = $scope.currentWord.english;
                    var correctLetters = englishWord.split('');
                    var extraLetters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('').filter(function(letter) {
                        return correctLetters.indexOf(letter) === -1;
                    });

                    // Shuffle and take random extra letters
                    for (var i = extraLetters.length - 1; i > 0; i--) {
                        var j = Math.floor(Math.random() * (i + 1));
                        var temp = extraLetters[i];
                        extraLetters[i] = extraLetters[j];
                        extraLetters[j] = temp;
                    }

                    var numExtra = Math.max(0, 15 - correctLetters.length);
                    var allLetters = correctLetters.concat(extraLetters.slice(0, numExtra));

                    // Shuffle all letters
                    for (var i = allLetters.length - 1; i > 0; i--) {
                        var j = Math.floor(Math.random() * (i + 1));
                        var temp = allLetters[i];
                        allLetters[i] = allLetters[j];
                        allLetters[j] = temp;
                    }

                    $scope.letters = allLetters.map(function(letter) {
                        return {
                            char: letter,
                            isCorrect: false,
                            isUsed: false
                        };
                    });
                }
                ;

                $scope.selectLetter = function(letter) {
                    if (letter.isUsed)
                        return;

                    var englishWord = $scope.currentWord.english;
                    var currentInput = $scope.userInput;
                    var nextLetterIndex = currentInput.length;

                    if (nextLetterIndex < englishWord.length && letter.char === englishWord[nextLetterIndex]) {
                        letter.isCorrect = true;
                        letter.isUsed = true;
                        $scope.userInput += letter.char;

                        if ($scope.userInput === englishWord) {
                            $scope.isWordComplete = true;
                            // ‚≠ê ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ - Auto show when word is complete
                            $scope.showEnglish = true;
                        }
                    }
                }
                ;

                $scope.keepWord = function() {
                    if ($scope.keptWords.indexOf($scope.currentWordIndex) === -1) {
                        $scope.keptWords.push($scope.currentWordIndex);
                    }
                    $scope.nextWord();
                }
                ;

                $scope.passWord = function() {
                    if (!$scope.isWordComplete)
                        return;

                    $scope.passedWords.push($scope.currentWordIndex);
                    // Remove from kept words if it was there
                    var keptIndex = $scope.keptWords.indexOf($scope.currentWordIndex);
                    if (keptIndex !== -1) {
                        $scope.keptWords.splice(keptIndex, 1);
                    }
                    $scope.nextWord();
                }
                ;

                $scope.toggleShow = function() {
                    $scope.showEnglish = !$scope.showEnglish;
                }
                ;

                $scope.getCategoryName = function() {
                    return $scope.categoryOptions[$scope.selectedCategory];
                }
                ;

                $scope.resetCategory = function() {
                    $scope.changeCategory();
                }
                ;

                $scope.refreshApp = function() {
                    // Reset all variables to initial state
                    $scope.selectedCategory = 'A1';
                    $scope.currentWordIndex = 0;
                    $scope.showEnglish = false;
                    $scope.userInput = '';
                    $scope.letters = [];
                    $scope.isWordComplete = false;
                    $scope.isCompleted = false;
                    $scope.keptWords = [];
                    $scope.passedWords = [];
                    $scope.progressPercentage = 0;
                    
                    // Start fresh
                    $scope.changeCategory();
                };

                $scope.$watch(function() {
                    var totalWords = $scope.vocabularyData[$scope.selectedCategory].length;
                    var passedWords = $scope.passedWords.length;
                    return Math.round((passedWords / totalWords) * 100);
                }, function(newVal) {
                    $scope.progressPercentage = newVal || 0;
                });

                // Initialize the app
                $scope.init();

        // Service Worker registration for offline functionality
        function registerServiceWorker() {
            if ('serviceWorker' in navigator) {
                var swCode = `
                    const CACHE_NAME = 'flash-card';
                    const urlsToCache = [
                        '/',
                        'data:text/html;charset=utf-8,${encodeURIComponent(document.documentElement.outerHTML)}'
                    ];
                    
                    self.addEventListener('install', event => {
                        event.waitUntil(
                            caches.open(CACHE_NAME)
                                .then(cache => cache.addAll(urlsToCache))
                        );
                    });
                    
                    self.addEventListener('fetch', event => {
                        event.respondWith(
                            caches.match(event.request)
                                .then(response => response || fetch(event.request))
                        );
                    });
                `;
                
                var blob = new Blob([swCode], { type: 'application/javascript' });
                var swUrl = URL.createObjectURL(blob);
                
                navigator.serviceWorker.register(swUrl)
                    .then(function() { console.log('SW registered'); })
                    .catch(function(err) { console.log('SW registration failed'); });
            }
        }
        
        // Register service worker when page loads
        window.addEventListener('load', registerServiceWorker);

            });
        </script>
    </body>
</html>
